(function(a){if(typeof define==="function"&&define.amd){define(["angular","moment"],a)}else{if(typeof exports==="object"){module.exports=a(require("angular"),require("moment"))}else{a(window.angular,window.moment)}}}(function(a,c){a.module("ui.bootstrap.datetimepicker",[]).constant("dateTimePickerConfig",{dropdownSelector:null,minuteStep:5,minView:"minute",startView:"day"}).directive("datetimepicker",["$log","dateTimePickerConfig",function b(d,f){function e(){var k=new Date();var i=k.getTimezoneOffset()*60000;this.utcDateValue=k.getTime();this.selectable=true;this.localDateValue=function(){return this.utcDateValue+i};var l=["utcDateValue","localDateValue","display","active","selectable","past","future"];for(var j in arguments[0]){if(l.indexOf(j)>=0){this[j]=arguments[0][j]}}}var h=function h(i){var k=["startView","minView","minuteStep","dropdownSelector"];for(var j in i){if(k.indexOf(j)<0){throw ("invalid option: "+j)}}var l=["minute","hour","day","month","year"];if(l.indexOf(i.startView)<0){throw ("invalid startView value: "+i.startView)}if(l.indexOf(i.minView)<0){throw ("invalid minView value: "+i.minView)}if(l.indexOf(i.minView)>l.indexOf(i.startView)){throw ("startView must be greater than minView")}if(!a.isNumber(i.minuteStep)){throw ("minuteStep must be numeric")}if(i.minuteStep<=0||i.minuteStep>=60){throw ("minuteStep must be greater than zero and less than 60")}if(i.dropdownSelector!==null&&!a.isString(i.dropdownSelector)){throw ("dropdownSelector must be a string")}if(i.dropdownSelector!==null&&((typeof jQuery==="undefined")||(typeof jQuery().dropdown!=="function"))){d.error("Please DO NOT specify the dropdownSelector option unless you are using jQuery AND Bootstrap.js. Please include jQuery AND Bootstrap.js, or write code to close the dropdown in the on-set-time callback. \n\nThe dropdownSelector configuration option is being removed because it will not function properly.");delete i.dropdownSelector}};return{restrict:"E",require:"ngModel",template:'<div class="datetimepicker table-responsive"><table class="table table-striped  {{ data.currentView }}-view">   <thead>       <tr>           <th class="left" data-ng-click="changeView(data.currentView, data.leftDate, $event)" data-ng-show="data.leftDate.selectable"><i class="ion-arrow-left-a"/></th>           <th class="switch" colspan="5" data-ng-show="data.previousViewDate.selectable" data-ng-click="changeView(data.previousView, data.previousViewDate, $event)">{{ data.previousViewDate.display }}</th>           <th class="right" data-ng-click="changeView(data.currentView, data.rightDate, $event)" data-ng-show="data.rightDate.selectable"><i class="ion-arrow-right-a"/></th>       </tr>       <tr>           <th class="dow" data-ng-repeat="day in data.dayNames" >{{ day }}</th>       </tr>   </thead>   <tbody>       <tr data-ng-if="data.currentView !== \'day\'" >           <td colspan="7" >              <span    class="{{ data.currentView }}"                        data-ng-repeat="dateObject in data.dates"                         data-ng-class="{active: dateObject.active, past: dateObject.past, future: dateObject.future, disabled: !dateObject.selectable}"                        data-ng-click="changeView(data.nextView, dateObject, $event)">{{ dateObject.display }}</span>            </td>       </tr>       <tr data-ng-if="data.currentView === \'day\'" data-ng-repeat="week in data.weeks">           <td data-ng-repeat="dateObject in week.dates"                data-ng-click="changeView(data.nextView, dateObject, $event)"               class="day"                data-ng-class="{active: dateObject.active, past: dateObject.past, future: dateObject.future, disabled: !dateObject.selectable}" >{{ dateObject.display }}</td>       </tr>   </tbody></table></div>',scope:{onSetTime:"&",beforeRender:"&"},replace:true,link:function g(v,p,j,u){var o={};if(j.datetimepickerConfig){o=v.$parent.$eval(j.datetimepickerConfig)}var l={};a.extend(l,f,o);h(l);var x=function x(A){var z=(parseInt(c.utc(A).year()/10,10)*10);return c.utc(A).year(z).startOf("year")};var m={year:function y(G){var D=c.utc(G).startOf("year");var F=(parseInt(D.year()/10,10)*10);var E=c.utc(x(G)).subtract(1,"year").startOf("year");var z=u.$modelValue?c(u.$modelValue).year():0;var C={currentView:"year",nextView:l.minView==="year"?"setTime":"month",previousViewDate:new e({utcDateValue:null,display:F+"-"+(F+9)}),leftDate:new e({utcDateValue:c.utc(E).subtract(9,"year").valueOf()}),rightDate:new e({utcDateValue:c.utc(E).add(11,"year").valueOf()}),dates:[]};for(var B=0;B<12;B+=1){var H=c.utc(E).add(B,"years");var A={utcDateValue:H.valueOf(),display:H.format("YYYY"),past:H.year()<F,future:H.year()>F+9,active:H.year()===z};C.dates.push(new e(A))}return C},month:function t(G){var F=c.utc(G).startOf("year");var D=x(G);var z=u.$modelValue?c(u.$modelValue).format("YYYY-MMM"):0;var E={previousView:"year",currentView:"month",nextView:l.minView==="month"?"setTime":"day",previousViewDate:new e({utcDateValue:D.valueOf(),display:F.format("YYYY")}),leftDate:new e({utcDateValue:c.utc(F).subtract(1,"year").valueOf()}),rightDate:new e({utcDateValue:c.utc(F).add(1,"year").valueOf()}),dates:[]};for(var B=0;B<12;B+=1){var C=c.utc(F).add(B,"months");var A={utcDateValue:C.valueOf(),display:C.format("MMM"),active:C.format("YYYY-MMM")===z};E.dates.push(new e(A))}return E},day:function n(L){var I=c.utc(L);var K=c.utc(I).startOf("month");var G=c.utc(I).startOf("year");var C=c.utc(I).endOf("month");var J=c.utc(K).subtract(Math.abs(K.weekday()),"days");var z=u.$modelValue?c(u.$modelValue).format("YYYY-MMM-DD"):"";var H={previousView:"month",currentView:"day",nextView:l.minView==="day"?"setTime":"hour",previousViewDate:new e({utcDateValue:G.valueOf(),display:K.format("YYYY-MMM")}),leftDate:new e({utcDateValue:c.utc(K).subtract(1,"months").valueOf()}),rightDate:new e({utcDateValue:c.utc(K).add(1,"months").valueOf()}),dayNames:[],weeks:[]};for(var B=0;B<7;B+=1){H.dayNames.push(c.utc().weekday(B).format("dd"))}for(var D=0;D<6;D+=1){var M={dates:[]};for(var E=0;E<7;E+=1){var F=c.utc(J).add((D*7)+E,"days");var A={utcDateValue:F.valueOf(),display:F.format("D"),active:F.format("YYYY-MMM-DD")===z,past:F.isBefore(K),future:F.isAfter(C)};M.dates.push(new e(A))}H.weeks.push(M)}return H},hour:function r(G){var F=c.utc(G).startOf("day");var D=c.utc(F).startOf("month");var z=u.$modelValue?c(u.$modelValue).format("YYYY-MM-DD H"):"";var E={previousView:"day",currentView:"hour",nextView:l.minView==="hour"?"setTime":"minute",previousViewDate:new e({utcDateValue:D.valueOf(),display:F.format("ll")}),leftDate:new e({utcDateValue:c.utc(F).subtract(1,"days").valueOf()}),rightDate:new e({utcDateValue:c.utc(F).add(1,"days").valueOf()}),dates:[]};for(var C=0;C<24;C+=1){var B=c.utc(F).add(C,"hours");var A={utcDateValue:B.valueOf(),display:B.format("LT"),active:B.format("YYYY-MM-DD H")===z};E.dates.push(new e(A))}return E},minute:function s(H){var G=c.utc(H).startOf("hour");var E=c.utc(G).startOf("day");var z=u.$modelValue?c(u.$modelValue).format("YYYY-MM-DD H:mm"):"";var F={previousView:"hour",currentView:"minute",nextView:"setTime",previousViewDate:new e({utcDateValue:E.valueOf(),display:G.format("lll")}),leftDate:new e({utcDateValue:c.utc(G).subtract(1,"hours").valueOf()}),rightDate:new e({utcDateValue:c.utc(G).add(1,"hours").valueOf()}),dates:[]};var D=60/l.minuteStep;for(var C=0;C<D;C+=1){var B=c.utc(G).add(C*l.minuteStep,"minute");var A={utcDateValue:B.valueOf(),display:B.format("LT"),active:B.format("YYYY-MM-DD H:mm")===z};F.dates.push(new e(A))}return F},setTime:function w(C){var B=new Date(C);var z=new Date(B.getTime()+(B.getTimezoneOffset()*60000));var A=u.$modelValue;u.$setViewValue(z);if(l.dropdownSelector){jQuery(l.dropdownSelector).dropdown("toggle")}v.onSetTime({newDate:z,oldDate:A});return m[l.startView](C)}};var q=function q(z){var A=(z?c(z).toDate():new Date());return A.getTime()-(A.getTimezoneOffset()*60000)};v.changeView=function k(E,z,A){if(A){A.stopPropagation();A.preventDefault()}if(E&&(z.utcDateValue>-Infinity)&&z.selectable&&m[E]){var D=m[E](z.utcDateValue);var H=[];if(D.weeks){for(var B=0;B<D.weeks.length;B+=1){var F=D.weeks[B];for(var C=0;C<F.dates.length;C+=1){var G=F.dates[C];H.push(G)}}}v.beforeRender({$view:D.currentView,$dates:D.dates||H,$leftDate:D.leftDate,$upDate:D.previousViewDate,$rightDate:D.rightDate});v.data=D}};u.$render=function i(){v.changeView(l.startView,new e({utcDateValue:q(u.$viewValue)}))}}}}])}));